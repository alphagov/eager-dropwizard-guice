/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'christopherholmes' at '19/10/15 17:54' with Gradle 2.6
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.6/userguide/tutorial_java_projects.html
 */

plugins {
  id 'net.researchgate.release' version '2.2.2'
}
apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'maven-publish'

idea {
    project {
        jdkName = '1.8'
        languageLevel = '1.8'
    }
    module {
        //if you love browsing Javadoc
        downloadJavadoc = true

        //and hate reading sources :)
        downloadSources = true
    }
}

repositories {
    jcenter()
}

idea {
    project {
        jdkName = '1.8'
        languageLevel = '1.8'
    }
    module {
        //if you love browsing Javadoc
        downloadJavadoc = true

        //and hate reading sources :)
        downloadSources = true
    }
}

def dependencyVersions = [
  dropwizard:'0.8.4'
]

group = "uk.gov.verify"

dependencies {
    compile "com.hubspot.dropwizard:dropwizard-guice:${dependencyVersions.dropwizard}.0"

    testCompile "io.dropwizard:dropwizard-testing:${dependencyVersions.dropwizard}",
            "io.dropwizard:dropwizard-client:${dependencyVersions.dropwizard}"
}

publishing {
    publications {
      mavenJava(MavenPublication) {
        from components.java
          artifact sourceJar {
            classifier "sources"
          }
      }
    }
    repositories {
      mavenLocal()
        maven {
          url "/srv/maven" // change to point to your repo, e.g. http://my.org/repo
        }
    }
}

task sourceJar(type: Jar) {
    from sourceSets.main.allJava
} 

configurations.all {
  resolutionStrategy {
    forcedModules= [
      "io.dropwizard:dropwizard-core:${dependencyVersions.dropwizard}",
    ]
  }
}

afterReleaseBuild.dependsOn publish
